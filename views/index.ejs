<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bookly</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://kit.fontawesome.com/a2f02755e4.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="/css/normalize.css" type="text/css" />
    <link rel="stylesheet" href="/css/styles.css" type="text/css" />
  </head>
  <body>
    <!-- Left Side Bar Section Display Area -->
    <section class="sideBar">
      <section class="hamburgerBtn">
        <i class="fa-solid fa-bars"></i>
      </section>
      <!-- Profile Info (Picture, Name, Email) -->
      <section class="profileArea">
        <img
          src="images/headshot copy.jpeg"
          alt="profile picture"
          class="profilePicture"
        />
        <section>
          <p class="profileName">Daniel</p>
          <p class="profileAddress">dan.jkim21@gmail.com</p>
        </section>
      </section>
      <!-- Navigation Display Area -->
      <nav class="navContent">
        <ul class="navList">
          <li class="navListItems"><a href="#">Search</a></li>
          <li class="navListItems active"><a href="/">Books</a></li>
          <li class="navListItems"><a href="/completed">Completed</a></li>
          <li class="navListItems"><a href="#">Settings</a></li>
        </ul>
      </nav>
    </section>

    <!-- App Main Display Area -->
    <main class="appDisplayArea">
      <!-- Playlist Display Area -->
      <section class="playlistInfoArea flexBox">
        <!-- App Feature Title - Playlist Area -->
        <h1 class="appTitle">Books Playlist</h1>

        <!-- App Playlist Pop-up Modal - Add Book -->
        <section>
          <!-- Add Book Btn -->
          <section class="wrapper">
            <a class="addBookBtn" href="#addBookModal">Add Book</a>
          </section>
          <!-- Pop-Up Modal Area -->
          <section id="addBookModal" class="modal">
            <section class="modal__content">
              <h3 class="modalTitle">Add Book to Playlist</h3>
              <form action="">
                <input
                  type="text"
                  placeholder="Enter book name"
                  class="bookSearchInput"
                />
                <!-- <button>Search</button> -->
              </form>
              <section class="suggestionsContainer" class="flexBox">
                <ul class="suggestions" class=""></ul>
              </section>

              <a href="#" class="modal__close">&times;</a>
            </section>
          </section>
        </section>
      </section>

      <!-- Playlist Description Paragraph -->
      <p class="playlistDescription">
        Playlist description ... Lorem ipsum dolor sit, amet consectetur adipisicing elit.
        Hic, consequatur! Fugiat dicta asperiores quis suscipit iste numquam atque optio
        mollitia odio modi!
      </p>

      <!-- Now Playing Playlist Section Area -->
      <section class="ActiveBookArea">
        <h2 class="sectionTitle">Now reading</h2>

        <!-- Active Book -->
        <section
          class="bookItem flexBox"
          data-id="<%= booksData.filter(elem => !elem.isCompleted)[0].bookId %>"
          data-isFavorited="<%= booksData.filter(elem => !elem.isCompleted)[0].isFavorited %>"
          data-isCompleted="<%= booksData.filter(elem => !elem.isCompleted)[0].isCompleted %>"
        >
          <img
            src="<%= 'https://' + booksData.filter(elem => !elem.isCompleted)[0].bookImage.split('//')[1] %>"
            alt="book cover image"
            class="bookCoverImage"
          />
          <section class="bookInfo">
            <p class="bookTitle condenseText"><%= booksData.filter(elem => !elem.isCompleted)[0].bookTitle %></p>
            <p class="bookAuthor condenseText"><%= booksData.filter(elem => !elem.isCompleted)[0].bookAuthors %></p>
          </section>
          <i
            class="fa-solid fa-heart likeBookItemBtns invisible"
            title="Favorite this book"
            data-id="<%= booksData.filter(elem => !elem.isCompleted)[0].bookId %>"
            data-isFavorited="<%= booksData.filter(elem => !elem.isCompleted)[0].isFavorited %>"
          ></i>
          <a class="editBookItemBtn" href="#<%= booksData.filter(elem => !elem.isCompleted)[0].bookId %>">Info</a>

          <!-- Active Book Modal -->
          <section id="<%= booksData.filter(elem => !elem.isCompleted)[0].bookId %>" class="modal">
            <section class="modal__content">
              <section class="editBookSummaryMain flexBox">
                <img
                  src="<%= 'https://' + booksData.filter(elem => !elem.isCompleted)[0].bookImage.split('//')[1] %>"
                  alt="book cover image"
                  class="bookCoverImage"
                />
                <section class="editBookInfo">
                  <p class="bookTitle"><%= booksData.filter(elem => !elem.isCompleted)[0].bookTitle %></p>
                  <p class="bookAuthor"><%= booksData.filter(elem => !elem.isCompleted)[0].bookAuthors %></p>
                  <span class="modalFavoriteBtn"
                    ><i
                      class="fa-solid fa-heart likeBookItemBtns invisible"
                      title="Favorite this book"
                      data-id="<%= booksData.filter(elem => !elem.isCompleted)[0].bookId %>"
                      data-isFavorited="<%= booksData.filter(elem => !elem.isCompleted)[0].isFavorited %>"
                    ></i
                    >Favorite</span
                  >
                </section>
              </section>
              <section class="modalMoreBtns">
                <span class="modalCompleteBtn"
                  ><i
                    class="fa-solid fa-check completeBookItem"
                    title="Mark book as completed"
                    data-id="<%= booksData.filter(elem => !elem.isCompleted)[0].bookId %>"
                    data-isCompleted="<%= booksData.filter(elem => !elem.isCompleted)[0].isCompleted %>"
                  ></i
                  >Mark As Read</span
                >
                <span class="modalDeleteBtn">
                  <i
                    class="fa-solid fa-trash removeBookItemBtns"
                    title="Remove book from playlist"
                    data-id="<%= booksData.filter(elem => !elem.isCompleted)[0].bookId %>"
                  ></i
                  >Delete
                </span>
              </section>
              <p class="bookDescription"><%= booksData.filter(elem => !elem.isCompleted)[0].bookDescription %></p>
              <a href="#" class="modal__close">&times;</a>
            </section>
          </section>
        </section>
      </section>

      <!-- Next Up Playlist Section Area -->
      <section class="bookPlaylistArea">
        <h2 class="sectionTitle">Next up</h2>

        <!-- Loop through book entries-->
        <% booksData.filter(elem => !elem.isCompleted).slice(1).map(elem => { %>
        <section
          class="bookItem flexBox"
          data-id="<%= elem.bookId %>"
          data-isFavorited="<%= elem.isFavorited %>"
          data-isCompleted="<%= elem.isCompleted %>"
        >
          <!-- Add books image -->
          <img
            src="<%= 'https://' + elem.bookImage.split('//')[1] %>"
            alt="book cover image"
            class="bookCoverImage"
          />
          <!-- Add books title & authors -->
          <section class="bookInfo">
            <p class="bookTitle condenseText"><%= elem.bookTitle %></p>
            <p class="bookAuthor condenseText"><%= elem.bookAuthors %></p>
          </section>
          <i
            class="fa-solid fa-heart likeBookItemBtns invisible"
            title="Favorite this book"
            data-id="<%= elem.bookId %>"
            data-isFavorited="<%= elem.isFavorited %>"
          ></i>
          <a class="editBookItemBtn" href="#<%= elem.bookId %>">Info</a>

          <!-- Add books modal details -->
          <section id="<%= elem.bookId %>" class="modal">
            <section class="modal__content">
              <section class="editBookSummaryMain flexBox">
                <img
                  src="<%= 'https://' + elem.bookImage.split('//')[1] %>"
                  alt="book cover image"
                  class="bookCoverImage"
                />
                <section class="editBookInfo">
                  <p class="bookTitle"><%= elem.bookTitle %></p>
                  <p class="bookAuthor"><%= elem.bookAuthors %></p>

                  <!-- NEED TO FIX --- Issue with Favorite button in Modal (invisible but still clickable in other modals) -->
                  <span class="modalFavoriteBtn"
                    ><i
                      class="fa-solid fa-heart likeBookItemBtns invisible"
                      title="Favorite this book"
                      data-id="<%= elem.bookId %>"
                      data-isFavorited="<%= elem.isFavorited %>"
                    ></i
                    >Favorite</span
                  >
                  <!-- ^ NEED TO FIX ^ -->
                </section>
              </section>
              <section class="modalMoreBtns">
                <span class="modalCompleteBtn"
                  ><i
                    class="fa-solid fa-check completeBookItem"
                    title="Mark book as completed"
                    data-id="<%= elem.bookId %>"
                    data-isCompleted="<%= elem.isCompleted %>"
                  ></i
                  >Mark As Read</span
                >
                <span class="modalDeleteBtn">
                  <i
                    class="fa-solid fa-trash removeBookItemBtns"
                    title="Remove book from playlist"
                    data-id="<%= elem.bookId %>"
                  ></i
                  >Delete
                </span>
              </section>
              <p class="bookDescription"><%= elem.bookDescription %></p>
              <a href="#" class="modal__close">&times;</a>
            </section>
          </section>
        </section>
        <% }); %>
      </section>
    </main>

    <script src="/js/main.js"></script>
  </body>
</html>
